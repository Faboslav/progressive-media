"use strict";var _createClass=function(){function r(e,i){for(var s=0;s<i.length;s++){var r=i[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,s){return i&&r(e.prototype,i),s&&r(e,s),e}}();function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var progressiveMediaOptions=Object.assign((progressiveMediaOptions=void 0!==progressiveMediaOptions)?progressiveMediaOptions:{},{viewportOffset:window.innerHeight/2,throttleTime:50,debounceTime:100}),ProgressiveMedia=function(){function i(e){return _classCallCheck(this,i),i.instance||(this.init(e),i.instance=this),i.instance}return _createClass(i,[{key:"init",value:function(e){this.viewportOffset=e.viewportOffset,this.throttleTime=e.throttleTime,this.debounceTime=e.debounceTime}},{key:"_isInViewport",value:function(e){var i=(window.pageYOffset||document.documentElement.scrollTop)-this.viewportOffset,s=(window.pageYOffset||document.documentElement.scrollTop)+window.innerHeight+this.viewportOffset,r=e.getBoundingClientRect().top+i,t=r+e.clientHeight;return i<r&&r<s||i<t&&t<s}},{key:"_supportPassive",value:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(e){}return e}},{key:"_throttle",value:function(e,i){var s=Date.now();return function(){s+i-Date.now()<0&&(e(),s=Date.now())}}},{key:"_debounce",value:function(r,t,o){var a;return function(){var e=this,i=arguments,s=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(e,i)},t),s&&r.apply(e,i)}}},{key:"loadProgressiveMedia",value:function(){var e,i=document.querySelectorAll(".progressive-media:not(.progressive-media-loaded):not(.progressive-media-loading)");for(e=0;e<i.length;++e)progressiveMedia._isInViewport(i[e])&&progressiveMedia.loadProgressiveMedium(i[e])}},{key:"loadProgressiveMedium",value:function(e){if(e.classList.remove("progressive-media-unloaded"),e.classList.add("progressive-media-loading"),e.classList.contains("progressive-media-image")){var i=new Image;i.src=e.getAttribute("data-img-src"),i.className="progressive-media-image-original progressive-media-content",i.onload=function(){e.querySelector(".progressive-media-aspect-inner").insertAdjacentElement("beforeend",i),e.classList.remove("progressive-media-loading"),e.classList.add("progressive-media-loaded")}}else e.classList.contains("progressive-media-iframe")&&(e.querySelector(".progressive-media-aspect-inner").insertAdjacentHTML("beforeend",e.querySelector("noscript").innerText.trim()),e.classList.remove("progressive-media-loading"),e.classList.add("progressive-media-loaded"))}}]),i}(),progressiveMedia=new ProgressiveMedia(progressiveMediaOptions);Object.freeze(progressiveMedia),progressiveMedia.loadProgressiveMedia(),window.addEventListener("DOMContentLoaded",progressiveMedia.loadProgressiveMedia()),window.addEventListener("scroll",progressiveMedia._throttle(progressiveMedia.loadProgressiveMedia,progressiveMedia.throttleTime),!!progressiveMedia._supportsPassive&&{capture:!0,passive:!0}),window.addEventListener("scroll",progressiveMedia._debounce(progressiveMedia.loadProgressiveMedia,progressiveMedia.debounceTime),!!progressiveMedia._supportsPassive&&{capture:!0,passive:!0}),window.addEventListener("resize",progressiveMedia._debounce(progressiveMedia.loadProgressiveMedia,progressiveMedia.debounceTime),!!progressiveMedia._supportsPassive&&{capture:!0,passive:!0});